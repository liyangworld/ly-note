
{% extends '../../tpl/layout_javascript.html' %}

{% set title_suffix = 'DOM概述' %}

{% block content %}

<h1>DOM概述</h1>
<h2>简介</h2>
<p>DOM 全称为“文档对象模型”（Document Object Model）。浏览器将结构化文档（比如HTML和XML）解析成一系列的节点，再由这些节点组成一个树状结构（DOM Tree），由此对外提供编程接口。</p>

<p>DOM的最小组成单位叫做节点（node）。节点的类型有七种：</p>
<table>
    <thead>
        <tr>
            <th>节点类型</th>
            <th>nodeType</th>
            <th>nodeName</th>
            <th>说明</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Document</td>
            <td>9</td>
            <td>#document</td>
            <td>整个文档树的顶层节点</td>
        </tr>
        <tr>
            <td>DocumentType</td>
            <td>10</td>
            <td>doctype标签的内容(如:"html")</td>
            <td>doctype标签（比如&lt;!DOCTYPE html>）</td>
        </tr>
        <tr>
            <td>Element</td>
            <td>1</td>
            <td>大写的HTML元素名</td>
            <td>网页的各种HTML标签</td>
        </tr>
        <tr>
            <td>Attribute</td>
            <td>2</td>
            <td>属性名</td>
            <td>网页元素的属性</td>
        </tr>
        <tr>
            <td>Text</td>
            <td>3</td>
            <td>#text</td>
            <td>标签之间或标签包含的文本</td>
        </tr>
        <tr>
            <td>Comment</td>
            <td>8</td>
            <td>#comment</td>
            <td>注释</td>
        </tr>
        <tr>
            <td>DocumentFragment</td>
            <td>11</td>
            <td>#document-fragment</td>
            <td>文档的片段</td>
        </tr>
    </tbody>
</table>

<h2>Node 对象</h2>
<h3>1. 属性</h3>
<table>
    <thead>
    <tr>
        <th>属性</th>
        <th>说明</th>
    </tr>
    </thead>
    <tbody>
        <tr>
            <td>nodeType</td>
            <td>返回节点类型的常数值</td>
        </tr>
        <tr>
            <td>nodeName</td>
            <td>返回节点的名称</td>
        </tr>
        <tr>
            <td>nodeValue</td>
            <td>返回一个字符串，表示当前节点本身的文本值，该属性可读写。因为只有Text节点、Comment节点、XML文档的CDATA节点有文本值，因此只对这几种节点有效</td>
        </tr>
        <tr>
            <td>textContent</td>
            <td>返回当前节点和它的所有后代节点的文本内容，可读写</td>
        </tr>
        <tr>
            <td>baseURI</td>
            <td>返回一个字符串，表示当前网页的绝对路径，只读</td>
        </tr>
        <tr class="separator"><td></td><td></td></tr>

        <tr>
            <td>ownerDocument</td>
            <td>返回当前节点所在的顶层文档对象，即document对象</td>
        </tr>

        <tr>
            <td>parentNode</td>
            <td>返回当前节点的父节点</td>
        </tr>
        <tr>
            <td>parentElement</td>
            <td>返回当前节点的父Element节点</td>
        </tr>
        <tr>
            <td>childNodes</td>
            <td>返回一个NodeList集合(动态的)，成员包括当前节点的所有子节点(包括文本和注释节点)</td>
        </tr>
        <tr>
            <td>firstChild</td>
            <td>返回当前节点的第一个子节点，包括文本和注释节点</td>
        </tr>
        <tr>
            <td>lastChild</td>
            <td>返回当前节点的最后一个子节点</td>
        </tr>
        <tr>
            <td>nextSibling</td>
            <td>返回紧跟在当前节点后面的第一个同级节点，无则返回null。该属性还包括文本节点和评论节点，若当前节点后面有空格则返回一个文本节点，内容为空格</td>
        </tr>
        <tr>
            <td>previousSibling</td>
            <td>返回当前节点前面的、距离最近的一个同级节点，无则返回null</td>
        </tr>
    </tbody>
</table>

<h3>2. 方法</h3>
<table>
    <thead>
        <tr>
            <th>方法</th>
            <th>说明</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>appendChild()</td>
            <td>在当前节点中插入某节点作为最后一个子节点，若参数节点是DOM中已经存在的节点，则将其从原来的位置移动到新位置</td>
        </tr>
        <tr>
            <td>insertBefore(newEl,childEl)</td>
            <td>将某个节点插入当前节点的指定子节点之前，返回被插入的新节点。第二个参数为null则插入最后</td>
        </tr>

        <tr>
            <td>replaceChild(newEl,childEl)</td>
            <td>用一个新的节点替换当前节点的某一个子节点，返回被替换走的那个子节点</td>
        </tr>
        <tr>
            <td>removeChild()</td>
            <td>从当前节点中移除某子节点，返回被移除的子节点</td>
        </tr>
        <tr>
            <td>hasChildNodes()</td>
            <td>判断当前节点是否有子节点</td>
        </tr>

        <tr>
            <td>contains()</td>
            <td>判断某节点是否为当前节点的后代节点</td>
        </tr>
        <tr>
            <td>cloneNode(false)</td>
            <td>克隆一个节点，参数表示是否同时克隆子节点。节点的属性也会同时拷贝，但是会丢失事件属性和事件监听</td>
        </tr>

        <tr>
            <td>isEqualNode()</td>
            <td>判断两个节点是否相等(包括类型、属性、子节点)，但不一定是同一个节点</td>
        </tr>
        <tr>
            <td>isSameNode()</td>
            <td>判断两个节点是否是同一个节点</td>
        </tr>
        <tr>
            <td>compareDocumentPosition()</td>
            <td>返回一个7位的二进制值，表示参数节点与当前节点的关系</td>
        </tr>
        <tr>
            <td>normalize()</td>
            <td>用于清理当前节点内部的所有Text节点。它会去除空的文本节点，并且将毗邻的文本节点合并成一个</td>
        </tr>
    </tbody>
</table>

<h2>NodeList对象、HTMLCollection对象</h2>
<p>NodeList对象 和 HTMLCollection对象都是类数组对象，都有length属性，可用索引获取成员。</p>
<p>NodeList实例对象可能是动态集合，也可能是静态集合。Node.childNodes返回的就是一个动态集合；document.querySelectorAll方法返回的是一个静态集合。</p>
<p>document.links、docuement.forms、document.images等属性，返回的都是HTMLCollection实例对象。</p>
<p>HTMLCollection与NodeList的区别有以下几点：</p>
<ol>
    <li>HTMLCollection实例对象的成员只能是Element节点，NodeList实例对象的成员可以包含其他节点。</li>
    <li>HTMLCollection实例对象都是动态集合，节点的变化会实时反映在集合中。NodeList实例对象可以是静态集合。</li>
    <li>HTMLCollection实例对象可以用id属性或name属性引用节点元素，NodeList只能使用数字索引引用。</li>
</ol>

<h2>ParentNode接口</h2>
<p>ParentNode接口用于获取Element子节点。Element节点、Document节点和DocumentFragment节点，部署了ParentNode接口。</p>
<h3>属性</h3>
<table>
    <thead>
    <tr>
        <th>属性</th>
        <th>说明</th>
    </tr>
    </thead>
    <tbody>
        <tr>
            <td>children</td>
            <td>返回一个动态的HTMLCollection集合，由当前节点的所有Element子节点组成</td>
        </tr>
        <tr>
            <td>childElementCount</td>
            <td>返回当前节点的所有Element子节点的数目</td>
        </tr>
        <tr>
            <td>firstElementChild</td>
            <td>返回当前节点的第一个Element子节点，无则返回null</td>
        </tr>
        <tr>
            <td>lastElementChild</td>
            <td>返回当前节点的最后一个Element子节点，无则返回null</td>
        </tr>
    </tbody>
</table>


<h2>ChildNode接口</h2>
<p>ChildNode接口用于处理子节点（包含但不限于Element子节点）。Element节点、DocumentType节点和CharacterData接口，部署了ChildNode接口。</p>
<h3>方法</h3>
<table>
    <thead>
        <tr>
            <th>方法</th>
            <th>说明</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>el.remove()</td>
            <td>移除当前节点自身</td>
        </tr>
        <tr>
            <td>el.before(newEl)</td>
            <td>用于在当前节点的前面，插入一个同级节点，若参数是文本则代表文本节点</td>
        </tr>
        <tr>
            <td>el.after(newEl)</td>
            <td>用于在当前节点的后面，插入一个同级节点，若参数是文本则代表文本节点</td>
        </tr>
        <tr>
            <td>el.replaceWith(newEl)</td>
            <td>使用参数节点替换当前节点</td>
        </tr>
    </tbody>
</table>

{% endblock %}