
{% extends '../../../tpl/layout_node.html' %}

{% set title_suffix = '发起HTTP请求' %}

{% block content %}

<h1>发起HTTP请求</h1>
<h2>简介</h2>
<p>Node.js可以使用http模块发起HTTP请求，因此可以用来实现 代理服务器、爬虫等。常用第三方模块 request 来简化请求。</p>
<h3>发起HTTP请求</h3>
<pre>
var http = require('http');

var options = {
        hostname: 'www.example.com',
        port: 80,
        path: '/upload',
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded'
        }
    };
var req = http.request(options, function (response) {
        console.log(response.statusCode);
    });
req.write('Hello World');
req.end();
</pre>

<h3>便捷请求 - get</h3>
<pre>
var http = require('http');

http.get('http://www.example.com/', function (response) {
        console.log(response.statusCode);
    });
</pre>

<h3>发起HTTPS请求</h3>
<p>发起HTTPS请求使用https模块，其他的都与发起HTTP请求相似。</p>
<pre>
var https = require('https');

var options = {
        hostname: 'www.example.com',
        port: 80,
        path: '/upload',
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded'
        }
    };
var req = https.request(options, function (response) {
        console.log(response.statusCode);
    });
req.write('Hello World');
req.end();
</pre>
<p>如果目标服务器使用的SSL证书是自制的，不是从颁发机构购买的，默认情况下https模块会拒绝连接，提示说有证书安全问题。在options里加入rejectUnauthorized: false字段可以禁用对证书有效性的检查，从而允许https模块请求开发环境下使用自制证书的HTTPS服务器。</p>


{% endblock %}